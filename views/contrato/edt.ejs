<%-include('../cabecalho.ejs')%>
<h1>Editar Contrato</h1>
<div>
    <a href="/contrato/lst" class="btn">Listar Contratos</a>
</div>
<div>
    <form method="post" action="/contrato/edt/<%=contrato._id%>">
        <input type="hidden" name="id" value="<%=contrato._id%>">
        
        <label>Cliente:</label>
        <select name="cliente" required>
            <option value="" disabled selected>SELECIONE O CLIENTE</option>
            <% clientes.forEach(function(cliente){ %>
                <option value='<%=cliente._id%>' 
                    <%=contrato.cliente && contrato.cliente._id.equals(cliente._id) ? 'selected' : ''%>>
                    <%=cliente.nome%> - <%=cliente.cpf%>
                </option>
            <% }) %>
        </select><br>
        
        <label>Quarto:</label>
        <select name="quarto" required>
            <option value="" disabled selected>SELECIONE O QUARTO</option>
            <% quartos.forEach(function(quarto){ %>
                <option value='<%=quarto._id%>' 
                    <%=contrato.quarto && contrato.quarto._id.equals(quarto._id) ? 'selected' : ''%>>
                    Quarto <%=quarto.numero%> - R$ <%=quarto.diaria%>
                </option>
            <% }) %>
        </select><br>
        
        <label>Data In√≠cio:</label>
        <input type="date" name="data_inicio" value="<%=contrato.data_inicio ? contrato.data_inicio.toISOString().split('T')[0] : ''%>" required><br>
        
        <label>Data Fim:</label>
        <input type="date" name="data_fim" value="<%=contrato.data_fim ? contrato.data_fim.toISOString().split('T')[0] : ''%>" required><br>
        
        <label>Valor Total:</label>
        <input type="number" step="0.01" name="valor" value="<%=contrato.valor%>" required><br>

        <button type="submit" class="btn edit">Atualizar</button>
        <a href="/contrato/lst" class="btn">Voltar</a>
    </form>
</div>
<%-include('../rodape.ejs')%>